---
layout: default
---

<div class="a" >
    <div class="toc">
        <div style="font-size: larger;">On This Page</div>
        {% include toc.html html=content sanitize=true class="inline_toc" id="my_toc" h_min=2 %}
    </div>

    <div style="flex:1; min-width:0; order: 1;"> 
        {{ content }}
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const toc = document.querySelector(".toc");
  // Only grab the first h1 inside the main content div
  const firstHeader = document.querySelector(".content h1");
  const originalParent = toc?.parentNode;
  const originalNextSibling = toc?.nextSibling;

  function moveTOC() {
    if (!toc || !firstHeader) return;

    if (window.innerWidth <= 900) {
      // Only move if it's not already after the header
      if (firstHeader.nextElementSibling !== toc) {
        firstHeader.insertAdjacentElement("afterend", toc);
      }
    } else {
      // Put back in the original sidebar location
      if (originalParent && toc.parentNode !== originalParent) {
        if (originalNextSibling) {
          originalParent.insertBefore(toc, originalNextSibling);
        } else {
          originalParent.appendChild(toc);
        }
      }
    }
  }

  // Run once on load
  moveTOC();

  // Throttle resize so it doesn't jump around too much
  let resizeTimer;
  window.addEventListener("resize", function() {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(moveTOC, 150);
  });
});
</script>

<style>
@media (min-width: 901px) {
  .toc {
    order: 2;
    width: 12rem;
    position: sticky;
    top: 4rem;
    max-height: 80vh;
    overflow: auto;
    padding: 1rem;
    border-left: 1px solid #444; 
    border-radius: 10px;
    flex-shrink: 0;
    font-size: small;
  }
  .a {
    display:flex; align-items:flex-start; gap: 1rem;
  }
}
.main {
    max-width: 65rem;
}
</style>
